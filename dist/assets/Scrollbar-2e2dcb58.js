import{T as Se}from"./runtime-dom.esm-bundler-4c308a5c.js";import{j as W,I as Ve,f as ae,g as de,k as le,h as Be,u as Ne,l as Ae,i as Ge}from"./light-ddbeb814.js";import{d as He,aR as Ke,aT as qe,b as T,c as B,g as Je,f as Qe,a as Ze,h as C,F as et,ah as tt}from"./runtime-core.esm-bundler-f0bd303b.js";import{a as nt}from"./light-f7c48211.js";import{V as Re}from"./VResizeObserver-aa804d72.js";function rt(e){return e.composedPath()[0]||null}const xe=He({render(){var e,l;return(l=(e=this.$slots).default)===null||l===void 0?void 0:l.call(e)}});function ie(e){return e.composedPath()[0]}const ot={mousemoveoutside:new WeakMap,clickoutside:new WeakMap};function at(e,l,n){if(e==="mousemoveoutside"){const u=i=>{l.contains(ie(i))||n(i)};return{mousemove:u,touchstart:u}}else if(e==="clickoutside"){let u=!1;const i=f=>{u=!l.contains(ie(f))},d=f=>{u&&(l.contains(ie(f))||n(f))};return{mousedown:i,mouseup:d,touchstart:i,touchend:d}}return console.error(`[evtd/create-trap-handler]: name \`${e}\` is invalid. This could be a bug of evtd.`),{}}function Pe(e,l,n){const u=ot[e];let i=u.get(l);i===void 0&&u.set(l,i=new WeakMap);let d=i.get(n);return d===void 0&&i.set(n,d=at(e,l,n)),d}function lt(e,l,n,u){if(e==="mousemoveoutside"||e==="clickoutside"){const i=Pe(e,l,n);return Object.keys(i).forEach(d=>{re(d,document,i[d],u)}),!0}return!1}function it(e,l,n,u){if(e==="mousemoveoutside"||e==="clickoutside"){const i=Pe(e,l,n);return Object.keys(i).forEach(d=>{K(d,document,i[d],u)}),!0}return!1}function st(){if(typeof window>"u")return{on:()=>{},off:()=>{}};const e=new WeakMap,l=new WeakMap;function n(){e.set(this,!0)}function u(){e.set(this,!0),l.set(this,!0)}function i(r,o,c){const h=r[o];return r[o]=function(){return c.apply(r,arguments),h.apply(r,arguments)},r}function d(r,o){r[o]=Event.prototype[o]}const f=new WeakMap,R=Object.getOwnPropertyDescriptor(Event.prototype,"currentTarget");function H(){var r;return(r=f.get(this))!==null&&r!==void 0?r:null}function p(r,o){R!==void 0&&Object.defineProperty(r,"currentTarget",{configurable:!0,enumerable:!0,get:o??R.get})}const S={bubble:{},capture:{}},b={};function I(){const r=function(o){const{type:c,eventPhase:h,bubbles:w}=o,M=ie(o);if(h===2)return;const z=h===1?"capture":"bubble";let y=M;const x=[];for(;y===null&&(y=window),x.push(y),y!==window;)y=y.parentNode||null;const k=S.capture[c],X=S.bubble[c];if(i(o,"stopPropagation",n),i(o,"stopImmediatePropagation",u),p(o,H),z==="capture"){if(k===void 0)return;for(let $=x.length-1;$>=0&&!e.has(o);--$){const F=x[$],N=k.get(F);if(N!==void 0){f.set(o,F);for(const D of N){if(l.has(o))break;D(o)}}if($===0&&!w&&X!==void 0){const D=X.get(F);if(D!==void 0)for(const oe of D){if(l.has(o))break;oe(o)}}}}else if(z==="bubble"){if(X===void 0)return;for(let $=0;$<x.length&&!e.has(o);++$){const F=x[$],N=X.get(F);if(N!==void 0){f.set(o,F);for(const D of N){if(l.has(o))break;D(o)}}}}d(o,"stopPropagation"),d(o,"stopImmediatePropagation"),p(o)};return r.displayName="evtdUnifiedHandler",r}function j(){const r=function(o){const{type:c,eventPhase:h}=o;if(h!==2)return;const w=b[c];w!==void 0&&w.forEach(M=>M(o))};return r.displayName="evtdUnifiedWindowEventHandler",r}const U=I(),_=j();function L(r,o){const c=S[r];return c[o]===void 0&&(c[o]=new Map,window.addEventListener(o,U,r==="capture")),c[o]}function V(r){return b[r]===void 0&&(b[r]=new Set,window.addEventListener(r,_)),b[r]}function q(r,o){let c=r.get(o);return c===void 0&&r.set(o,c=new Set),c}function Z(r,o,c,h){const w=S[o][c];if(w!==void 0){const M=w.get(r);if(M!==void 0&&M.has(h))return!0}return!1}function ee(r,o){const c=b[r];return!!(c!==void 0&&c.has(o))}function te(r,o,c,h){let w;if(typeof h=="object"&&h.once===!0?w=k=>{P(r,o,w,h),c(k)}:w=c,lt(r,o,w,h))return;const z=h===!0||typeof h=="object"&&h.capture===!0?"capture":"bubble",y=L(z,r),x=q(y,o);if(x.has(w)||x.add(w),o===window){const k=V(r);k.has(w)||k.add(w)}}function P(r,o,c,h){if(it(r,o,c,h))return;const M=h===!0||typeof h=="object"&&h.capture===!0,z=M?"capture":"bubble",y=L(z,r),x=q(y,o);if(o===window&&!Z(o,M?"bubble":"capture",r,c)&&ee(r,c)){const X=b[r];X.delete(c),X.size===0&&(window.removeEventListener(r,_),b[r]=void 0)}x.has(c)&&x.delete(c),x.size===0&&y.delete(o),y.size===0&&(window.removeEventListener(r,U,z==="capture"),S[z][r]=void 0)}return{on:te,off:P}}const{on:re,off:K}=st(),ut=(typeof window>"u"?!1:/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!window.MSStream;function ct(){return ut}function dt(e){const l={isDeactivated:!1};let n=!1;return Ke(()=>{if(l.isDeactivated=!1,!n){n=!0;return}e()}),qe(()=>{l.isDeactivated=!0,n||(n=!0)}),l}function Tt(e){return function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=l.width?String(l.width):e.defaultWidth,u=e.formats[n]||e.formats[e.defaultWidth];return u}}function Bt(e){return function(l,n){var u=n!=null&&n.context?String(n.context):"standalone",i;if(u==="formatting"&&e.formattingValues){var d=e.defaultFormattingWidth||e.defaultWidth,f=n!=null&&n.width?String(n.width):d;i=e.formattingValues[f]||e.formattingValues[d]}else{var R=e.defaultWidth,H=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[H]||e.values[R]}var p=e.argumentCallback?e.argumentCallback(l):l;return i[p]}}function Ht(e){return function(l){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=n.width,i=u&&e.matchPatterns[u]||e.matchPatterns[e.defaultMatchWidth],d=l.match(i);if(!d)return null;var f=d[0],R=u&&e.parsePatterns[u]||e.parsePatterns[e.defaultParseWidth],H=Array.isArray(R)?ht(R,function(b){return b.test(f)}):ft(R,function(b){return b.test(f)}),p;p=e.valueCallback?e.valueCallback(H):H,p=n.valueCallback?n.valueCallback(p):p;var S=l.slice(f.length);return{value:p,rest:S}}}function ft(e,l){for(var n in e)if(e.hasOwnProperty(n)&&l(e[n]))return n}function ht(e,l){for(var n=0;n<e.length;n++)if(l(e[n]))return n}function Pt(e){return function(l){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=l.match(e.matchPattern);if(!u)return null;var i=u[0],d=l.match(e.parsePattern);if(!d)return null;var f=e.valueCallback?e.valueCallback(d[0]):d[0];f=n.valueCallback?n.valueCallback(f):f;var R=l.slice(i.length);return{value:f,rest:R}}}const{cubicBezierEaseInOut:Te}=Ve;function vt({name:e="fade-in",enterDuration:l="0.2s",leaveDuration:n="0.2s",enterCubicBezier:u=Te,leaveCubicBezier:i=Te}={}){return[W(`&.${e}-transition-enter-active`,{transition:`all ${l} ${u}!important`}),W(`&.${e}-transition-leave-active`,{transition:`all ${n} ${i}!important`}),W(`&.${e}-transition-enter-from, &.${e}-transition-leave-to`,{opacity:0}),W(`&.${e}-transition-leave-from, &.${e}-transition-enter-to`,{opacity:1})]}const bt=ae("scrollbar",`
 overflow: hidden;
 position: relative;
 z-index: auto;
 height: 100%;
 width: 100%;
`,[W(">",[ae("scrollbar-container",`
 width: 100%;
 overflow: scroll;
 height: 100%;
 max-height: inherit;
 scrollbar-width: none;
 `,[W("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",`
 width: 0;
 height: 0;
 display: none;
 `),W(">",[ae("scrollbar-content",`
 box-sizing: border-box;
 min-width: 100%;
 `)])])]),W(">, +",[ae("scrollbar-rail",`
 position: absolute;
 pointer-events: none;
 user-select: none;
 -webkit-user-select: none;
 `,[de("horizontal",`
 left: 2px;
 right: 2px;
 bottom: 4px;
 height: var(--n-scrollbar-height);
 `,[W(">",[le("scrollbar",`
 height: var(--n-scrollbar-height);
 border-radius: var(--n-scrollbar-border-radius);
 right: 0;
 `)])]),de("vertical",`
 right: 4px;
 top: 2px;
 bottom: 2px;
 width: var(--n-scrollbar-width);
 `,[W(">",[le("scrollbar",`
 width: var(--n-scrollbar-width);
 border-radius: var(--n-scrollbar-border-radius);
 bottom: 0;
 `)])]),de("disabled",[W(">",[le("scrollbar",{pointerEvents:"none"})])]),W(">",[le("scrollbar",`
 position: absolute;
 cursor: pointer;
 pointer-events: all;
 background-color: var(--n-scrollbar-color);
 transition: background-color .2s var(--n-scrollbar-bezier);
 `,[vt(),W("&:hover",{backgroundColor:"var(--n-scrollbar-color-hover)"})])])])])]),mt=Object.assign(Object.assign({},Be.props),{size:{type:Number,default:5},duration:{type:Number,default:0},scrollable:{type:Boolean,default:!0},xScrollable:Boolean,trigger:{type:String,default:"hover"},useUnifiedContainer:Boolean,triggerDisplayManually:Boolean,container:Function,content:Function,containerClass:String,containerStyle:[String,Object],contentClass:String,contentStyle:[String,Object],horizontalRailStyle:[String,Object],verticalRailStyle:[String,Object],onScroll:Function,onWheel:Function,onResize:Function,internalOnUpdateScrollLeft:Function,internalHoistYRail:Boolean}),ye=He({name:"Scrollbar",props:mt,inheritAttrs:!1,setup(e){const{mergedClsPrefixRef:l,inlineThemeDisabled:n,mergedRtlRef:u}=Ne(e),i=Ae("Scrollbar",u,l),d=T(null),f=T(null),R=T(null),H=T(null),p=T(null),S=T(null),b=T(null),I=T(null),j=T(null),U=T(null),_=T(null),L=T(0),V=T(0),q=T(!1),Z=T(!1);let ee=!1,te=!1,P,r,o=0,c=0,h=0,w=0;const M=ct(),z=B(()=>{const{value:t}=I,{value:a}=S,{value:s}=U;return t===null||a===null||s===null?0:Math.min(t,s*t/a+e.size*1.5)}),y=B(()=>`${z.value}px`),x=B(()=>{const{value:t}=j,{value:a}=b,{value:s}=_;return t===null||a===null||s===null?0:s*t/a+e.size*1.5}),k=B(()=>`${x.value}px`),X=B(()=>{const{value:t}=I,{value:a}=L,{value:s}=S,{value:v}=U;if(t===null||s===null||v===null)return 0;{const g=s-t;return g?a/g*(v-z.value):0}}),$=B(()=>`${X.value}px`),F=B(()=>{const{value:t}=j,{value:a}=V,{value:s}=b,{value:v}=_;if(t===null||s===null||v===null)return 0;{const g=s-t;return g?a/g*(v-x.value):0}}),N=B(()=>`${F.value}px`),D=B(()=>{const{value:t}=I,{value:a}=S;return t!==null&&a!==null&&a>t}),oe=B(()=>{const{value:t}=j,{value:a}=b;return t!==null&&a!==null&&a>t}),Ee=B(()=>{const{trigger:t}=e;return t==="none"||q.value}),We=B(()=>{const{trigger:t}=e;return t==="none"||Z.value}),A=B(()=>{const{container:t}=e;return t?t():f.value}),Me=B(()=>{const{content:t}=e;return t?t():R.value}),fe=dt(()=>{e.container||he({top:L.value,left:V.value})}),ze=()=>{fe.isDeactivated||G()},Ce=t=>{if(fe.isDeactivated)return;const{onResize:a}=e;a&&a(t),G()},he=(t,a)=>{if(!e.scrollable)return;if(typeof t=="number"){J(a??0,t,0,!1,"auto");return}const{left:s,top:v,index:g,elSize:E,position:Y,behavior:m,el:O,debounce:ne=!0}=t;(s!==void 0||v!==void 0)&&J(s??0,v??0,0,!1,m),O!==void 0?J(0,O.offsetTop,O.offsetHeight,ne,m):g!==void 0&&E!==void 0?J(0,g*E,E,ne,m):Y==="bottom"?J(0,Number.MAX_SAFE_INTEGER,0,!1,m):Y==="top"&&J(0,0,0,!1,m)},ke=(t,a)=>{if(!e.scrollable)return;const{value:s}=A;s&&(typeof t=="object"?s.scrollBy(t):s.scrollBy(t,a||0))};function J(t,a,s,v,g){const{value:E}=A;if(E){if(v){const{scrollTop:Y,offsetHeight:m}=E;if(a>Y){a+s<=Y+m||E.scrollTo({left:t,top:a+s-m,behavior:g});return}}E.scrollTo({left:t,top:a,behavior:g})}}function $e(){Ye(),Oe(),G()}function Le(){se()}function se(){Xe(),De()}function Xe(){r!==void 0&&window.clearTimeout(r),r=window.setTimeout(()=>{Z.value=!1},e.duration)}function De(){P!==void 0&&window.clearTimeout(P),P=window.setTimeout(()=>{q.value=!1},e.duration)}function Ye(){P!==void 0&&window.clearTimeout(P),q.value=!0}function Oe(){r!==void 0&&window.clearTimeout(r),Z.value=!0}function Ie(t){const{onScroll:a}=e;a&&a(t),ve()}function ve(){const{value:t}=A;t&&(L.value=t.scrollTop,V.value=t.scrollLeft*(i!=null&&i.value?-1:1))}function je(){const{value:t}=Me;t&&(S.value=t.offsetHeight,b.value=t.offsetWidth);const{value:a}=A;a&&(I.value=a.offsetHeight,j.value=a.offsetWidth);const{value:s}=p,{value:v}=H;s&&(_.value=s.offsetWidth),v&&(U.value=v.offsetHeight)}function be(){const{value:t}=A;t&&(L.value=t.scrollTop,V.value=t.scrollLeft*(i!=null&&i.value?-1:1),I.value=t.offsetHeight,j.value=t.offsetWidth,S.value=t.scrollHeight,b.value=t.scrollWidth);const{value:a}=p,{value:s}=H;a&&(_.value=a.offsetWidth),s&&(U.value=s.offsetHeight)}function G(){e.scrollable&&(e.useUnifiedContainer?be():(je(),ve()))}function me(t){var a;return!(!((a=d.value)===null||a===void 0)&&a.contains(rt(t)))}function Fe(t){t.preventDefault(),t.stopPropagation(),te=!0,re("mousemove",window,we,!0),re("mouseup",window,ge,!0),c=V.value,h=i!=null&&i.value?window.innerWidth-t.clientX:t.clientX}function we(t){if(!te)return;P!==void 0&&window.clearTimeout(P),r!==void 0&&window.clearTimeout(r);const{value:a}=j,{value:s}=b,{value:v}=x;if(a===null||s===null)return;const E=(i!=null&&i.value?window.innerWidth-t.clientX-h:t.clientX-h)*(s-a)/(a-v),Y=s-a;let m=c+E;m=Math.min(Y,m),m=Math.max(m,0);const{value:O}=A;if(O){O.scrollLeft=m*(i!=null&&i.value?-1:1);const{internalOnUpdateScrollLeft:ne}=e;ne&&ne(m)}}function ge(t){t.preventDefault(),t.stopPropagation(),K("mousemove",window,we,!0),K("mouseup",window,ge,!0),te=!1,G(),me(t)&&se()}function Ue(t){t.preventDefault(),t.stopPropagation(),ee=!0,re("mousemove",window,ue,!0),re("mouseup",window,ce,!0),o=L.value,w=t.clientY}function ue(t){if(!ee)return;P!==void 0&&window.clearTimeout(P),r!==void 0&&window.clearTimeout(r);const{value:a}=I,{value:s}=S,{value:v}=z;if(a===null||s===null)return;const E=(t.clientY-w)*(s-a)/(a-v),Y=s-a;let m=o+E;m=Math.min(Y,m),m=Math.max(m,0);const{value:O}=A;O&&(O.scrollTop=m)}function ce(t){t.preventDefault(),t.stopPropagation(),K("mousemove",window,ue,!0),K("mouseup",window,ce,!0),ee=!1,G(),me(t)&&se()}Je(()=>{const{value:t}=oe,{value:a}=D,{value:s}=l,{value:v}=p,{value:g}=H;v&&(t?v.classList.remove(`${s}-scrollbar-rail--disabled`):v.classList.add(`${s}-scrollbar-rail--disabled`)),g&&(a?g.classList.remove(`${s}-scrollbar-rail--disabled`):g.classList.add(`${s}-scrollbar-rail--disabled`))}),Qe(()=>{e.container||G()}),Ze(()=>{P!==void 0&&window.clearTimeout(P),r!==void 0&&window.clearTimeout(r),K("mousemove",window,ue,!0),K("mouseup",window,ce,!0)});const _e=Be("Scrollbar","-scrollbar",bt,nt,e,l),pe=B(()=>{const{common:{cubicBezierEaseInOut:t,scrollbarBorderRadius:a,scrollbarHeight:s,scrollbarWidth:v},self:{color:g,colorHover:E}}=_e.value;return{"--n-scrollbar-bezier":t,"--n-scrollbar-color":g,"--n-scrollbar-color-hover":E,"--n-scrollbar-border-radius":a,"--n-scrollbar-width":v,"--n-scrollbar-height":s}}),Q=n?Ge("scrollbar",void 0,pe,e):void 0;return Object.assign(Object.assign({},{scrollTo:he,scrollBy:ke,sync:G,syncUnifiedContainer:be,handleMouseEnterWrapper:$e,handleMouseLeaveWrapper:Le}),{mergedClsPrefix:l,rtlEnabled:i,containerScrollTop:L,wrapperRef:d,containerRef:f,contentRef:R,yRailRef:H,xRailRef:p,needYBar:D,needXBar:oe,yBarSizePx:y,xBarSizePx:k,yBarTopPx:$,xBarLeftPx:N,isShowXBar:Ee,isShowYBar:We,isIos:M,handleScroll:Ie,handleContentResize:ze,handleContainerResize:Ce,handleYScrollMouseDown:Ue,handleXScrollMouseDown:Fe,cssVars:n?void 0:pe,themeClass:Q==null?void 0:Q.themeClass,onRender:Q==null?void 0:Q.onRender})},render(){var e;const{$slots:l,mergedClsPrefix:n,triggerDisplayManually:u,rtlEnabled:i,internalHoistYRail:d}=this;if(!this.scrollable)return(e=l.default)===null||e===void 0?void 0:e.call(l);const f=this.trigger==="none",R=()=>C("div",{ref:"yRailRef",class:[`${n}-scrollbar-rail`,`${n}-scrollbar-rail--vertical`],"data-scrollbar-rail":!0,style:this.verticalRailStyle,"aria-hidden":!0},C(f?xe:Se,f?null:{name:"fade-in-transition"},{default:()=>this.needYBar&&this.isShowYBar&&!this.isIos?C("div",{class:`${n}-scrollbar-rail__scrollbar`,style:{height:this.yBarSizePx,top:this.yBarTopPx},onMousedown:this.handleYScrollMouseDown}):null})),H=()=>{var S,b;return(S=this.onRender)===null||S===void 0||S.call(this),C("div",tt(this.$attrs,{role:"none",ref:"wrapperRef",class:[`${n}-scrollbar`,this.themeClass,i&&`${n}-scrollbar--rtl`],style:this.cssVars,onMouseenter:u?void 0:this.handleMouseEnterWrapper,onMouseleave:u?void 0:this.handleMouseLeaveWrapper}),[this.container?(b=l.default)===null||b===void 0?void 0:b.call(l):C("div",{role:"none",ref:"containerRef",class:[`${n}-scrollbar-container`,this.containerClass],style:this.containerStyle,onScroll:this.handleScroll,onWheel:this.onWheel},C(Re,{onResize:this.handleContentResize},{default:()=>C("div",{ref:"contentRef",role:"none",style:[{width:this.xScrollable?"fit-content":null},this.contentStyle],class:[`${n}-scrollbar-content`,this.contentClass]},l)})),d?null:R(),this.xScrollable&&C("div",{ref:"xRailRef",class:[`${n}-scrollbar-rail`,`${n}-scrollbar-rail--horizontal`],style:this.horizontalRailStyle,"data-scrollbar-rail":!0,"aria-hidden":!0},C(f?xe:Se,f?null:{name:"fade-in-transition"},{default:()=>this.needXBar&&this.isShowXBar&&!this.isIos?C("div",{class:`${n}-scrollbar-rail__scrollbar`,style:{width:this.xBarSizePx,right:i?this.xBarLeftPx:void 0,left:i?void 0:this.xBarLeftPx},onMousedown:this.handleXScrollMouseDown}):null}))])},p=this.container?H():C(Re,{onResize:this.handleContainerResize},{default:H});return d?C(et,null,p,R()):p}}),yt=ye,Et=ye;export{yt as N,xe as W,Et as X,Bt as a,Tt as b,Pt as c,Ht as d,K as e,vt as f,rt as g,re as o};
